{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link rel="stylesheet" href="{% static 'usuarios/css/Guias.css' %}">
    
    <link rel="shortcut icon" href="{% static 'usuarios/images/icon.png' %}" type="image/x-icon">
    
    <title>Gu√≠as</title>
</head>
<body>
    <div class="Cabezota"></div>

    <div class="flex_superior">
        <a href="{% url 'inicio' %}"> 
            <img class="Atras" src="{% static 'usuarios/images/icon.png' %}" alt="Bot√≥n Atr√°s" />
        </a>
    </div>

    <div class="Cabeza">
        <header class="Header">
            <img class="Imagen" src="{% static 'usuarios/images/Guias.png' %}" alt="Logo Guia">
            <h1>Gu√≠as</h1>
        </header>
    </div>

    <div class="Contenedor">
        <h2>Selecciona un √°rea de estudio:</h2>
        <button class="boton-tema" onclick="cargarGuia('Matem√°ticas')">üßÆ Matem√°ticas</button>
        <button class="boton-tema" onclick="cargarGuia('Biolog√≠a')">üß¨ Biolog√≠a</button>
        <button class="boton-tema" onclick="cargarGuia('Idiomas')">üìò Idiomas</button>
        <button class="boton-tema" onclick="cargarGuia('Ciencias Sociales')">üìú Ciencias Sociales</button>
        <button class="boton-tema" onclick="cargarGuia('Inform√°tica')">üíª Inform√°tica</button>

        <div id="contenido">
            <p>üëà Haz clic en un √°rea para cargar gu√≠as, libros y recursos.</p>
        </div>
    </div>

    <!-- Extra√≠do a archivo JS (si decides hacerlo), o puede quedarse inline -->
    <script>
        const enlacesWikibooks = {
            "Matem√°ticas": "https://es.wikibooks.org/wiki/Matem√°ticas",
            "Biolog√≠a": "https://es.wikibooks.org/wiki/Biolog√≠a",
            "Idiomas": "https://es.wikibooks.org/wiki/Categor√≠a:Libros_de_Idiomas",
            "Ciencias Sociales": "https://es.wikibooks.org/wiki/Categor√≠a:Ciencias_sociales",
            "Inform√°tica": "https://es.wikibooks.org/wiki/Categor√≠a:Inform√°tica"
        };

        async function cargarGuia(tema) {
            const contenidoDiv = document.getElementById("contenido");
            contenidoDiv.innerHTML = "<p>Cargando... ‚è≥</p>";

            try {
                const wikiRes = await fetch(`https://es.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(tema)}`);
                const wikiData = await wikiRes.json();

                const gutenbergRes = await fetch(`https://gutendex.com/books?search=${encodeURIComponent(tema)}&languages=es`);
                const gutenbergData = await gutenbergRes.json();

                let html = `<h2>${wikiData.title}</h2>`;
                if (wikiData.thumbnail) {
                    html += `<img src="${wikiData.thumbnail.source}" style="max-width: 200px;">`;
                }
                html += `<p>${wikiData.extract}</p>`;
                html += `<a href="${wikiData.content_urls.desktop.page}" target="_blank">üìñ Leer m√°s en Wikipedia</a>`;

                if (enlacesWikibooks[tema]) {
                    html += `<h3>üìò Recursos educativos (Wikibooks):</h3>`;
                    html += `<a href="${enlacesWikibooks[tema]}" target="_blank">üìö Ver libros de ${tema} en Wikibooks</a>`;
                }

                if (gutenbergData.results.length > 0) {
                    html += `<h3>üìï Libros relacionados (Proyecto Gutenberg):</h3><ul>`;
                    gutenbergData.results.slice(0, 3).forEach(book => {
                        const formatos = book.formats;
                        const link = formatos["text/html"] || formatos["application/epub+zip"] || formatos["text/plain"];
                        if (link) {
                            html += `<li><a href="${link}" target="_blank">${book.title}</a></li>`;
                        }
                    });
                    html += `</ul>`;
                }

                contenidoDiv.innerHTML = html;

            } catch (error) {
                contenidoDiv.innerHTML = `<p>‚ö†Ô∏è Error al cargar el contenido. Intenta m√°s tarde.</p>`;
                console.error(error);
            }
        }
    </script>

    <footer>
        EduCol ¬© 2025. Todos los derechos reservados.
        <br>
        Creado Por Sarah Montes & Valentina Ojeda
        <br>
        Correo: Val&SarahPro@jourrapide.com
        <br>
        Telefono de Contacto: 318-489-9744
    </footer>
</body>
</html>
